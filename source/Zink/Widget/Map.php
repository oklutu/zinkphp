<?php

/**
 * MapUtil类
 * MapX，MapY到经纬度的转换，MapXY点间距离的计算。
 *
 * @author xszheng
 */
namespace Zink\Widget;
class Map
{
    /**
     * 地球半径
     */
    const EARTH_RADIUS = 6318137;
    /**
     * PI值常量
     */
    const PI = 3.1415926;
    /**
     * MapX,MapY的最小字符串长度
     */
    const MAPXY_MIN_LEN = 8;
    /**
     *
     * @var array
     */
    protected static $MAP_KEYS = array(
        array(0, 2, 1, 2, 8, 9, 4, 1, 7, 2, 5, 3, 9),
        array(0, 3, 2, 2, 9, 5, 8, 2, 6, 8, 4, 6, 3),
        array(1, 5, 2, 7, 1, 4, 7, 2, 4, 1, 4, 3, 0),
        array(0, 7, 8, 3, 4, 9, 0, 6, 7, 7, 4, 4, 2),
        array(0, 2, 1, 8, 4, 9, 3, 2, 3, 1, 5, 7, 8),
        array(0, 0, 9, 5, 4, 7, 3, 0, 8, 7, 5, 2, 8),
        array(0, 1, 5, 1, 1, 8, 2, 7, 1, 9, 1, 3, 5),
        array(0, 5, 2, 5, 6, 0, 3, 4, 6, 7, 1, 3, 5),
        array(1, 3, 2, 1, 8, 1, 8, 3, 7, 9, 2, 7, 0),
        array(1, 2, 7, 7, 4, 3, 1, 5, 5, 0, 6, 4, 4),
        array(1, 5, 2, 8, 9, 2, 5, 9, 6, 7, 3, 3, 5),
        array(1, 7, 9, 4, 5, 0, 9, 4, 9, 6, 1, 9, 9),
        array(0, 6, 8, 3, 3, 6, 3, 5, 2, 0, 0, 9, 1),
        array(1, 1, 1, 4, 7, 8, 6, 9, 6, 8, 8, 4, 6),
        array(0, 5, 2, 1, 2, 5, 7, 0, 0, 4, 7, 4, 1),
        array(0, 7, 6, 4, 2, 3, 9, 0, 7, 8, 5, 6, 7),
        array(0, 1, 7, 6, 0, 5, 4, 7, 6, 7, 7, 5, 7),
        array(0, 5, 2, 9, 8, 1, 7, 8, 3, 8, 5, 4, 5),
        array(0, 4, 3, 1, 2, 8, 3, 7, 0, 9, 4, 8, 8),
        array(1, 0, 6, 7, 9, 4, 3, 5, 2, 9, 8, 7, 7),
        array(1, 6, 4, 4, 6, 7, 1, 4, 4, 2, 6, 7, 5),
        array(0, 8, 1, 7, 7, 5, 2, 6, 4, 3, 9, 7, 5),
        array(1, 7, 0, 5, 6, 2, 5, 2, 7, 4, 6, 2, 8),
        array(0, 4, 9, 2, 3, 0, 5, 4, 7, 8, 7, 0, 5),
        array(1, 1, 0, 5, 1, 7, 2, 8, 7, 2, 6, 9, 3),
        array(1, 4, 2, 3, 6, 1, 5, 3, 2, 0, 3, 6, 2),
        array(1, 1, 6, 5, 1, 0, 6, 8, 9, 7, 1, 7, 9),
        array(0, 6, 5, 4, 0, 7, 1, 7, 6, 2, 5, 4, 2),
        array(1, 9, 8, 6, 6, 6, 8, 4, 5, 4, 0, 4, 0),
        array(1, 2, 7, 1, 5, 0, 6, 8, 0, 1, 3, 7, 9),
        array(1, 1, 6, 4, 9, 8, 6, 0, 6, 2, 1, 9, 8),
        array(0, 0, 1, 9, 5, 3, 3, 9, 6, 7, 4, 1, 1),
        array(0, 2, 8, 5, 7, 8, 6, 7, 3, 3, 1, 6, 4),
        array(1, 8, 2, 5, 8, 4, 7, 6, 8, 8, 5, 7, 6),
        array(0, 8, 3, 4, 9, 6, 1, 7, 8, 3, 0, 5, 5),
        array(1, 3, 2, 6, 7, 4, 2, 8, 7, 4, 9, 6, 8),
        array(1, 8, 8, 9, 3, 9, 1, 8, 5, 7, 2, 5, 0),
        array(0, 5, 8, 3, 1, 8, 8, 0, 3, 9, 3, 8, 1),
        array(1, 6, 0, 1, 1, 0, 3, 4, 3, 3, 3, 5, 9),
        array(1, 0, 5, 1, 7, 9, 6, 2, 4, 6, 0, 3, 5),
        array(1, 8, 2, 0, 9, 7, 1, 0, 5, 5, 8, 0, 6),
        array(1, 8, 9, 6, 7, 3, 9, 4, 1, 9, 6, 6, 2),
        array(0, 6, 0, 0, 8, 2, 6, 5, 9, 4, 1, 6, 2),
        array(1, 7, 9, 7, 9, 4, 4, 2, 1, 1, 5, 7, 4),
        array(1, 3, 0, 4, 3, 4, 6, 8, 6, 9, 1, 7, 0),
        array(0, 1, 2, 3, 9, 4, 1, 8, 7, 2, 2, 9, 8),
        array(1, 6, 5, 3, 2, 7, 6, 6, 9, 0, 0, 7, 7),
        array(1, 6, 8, 4, 9, 7, 8, 0, 3, 6, 5, 4, 8),
        array(0, 6, 6, 0, 9, 9, 4, 5, 5, 6, 8, 3, 7),
        array(1, 0, 1, 3, 4, 0, 0, 1, 4, 8, 5, 7, 0),
        array(1, 0, 2, 5, 8, 2, 2, 4, 8, 9, 7, 1, 6),
        array(1, 4, 2, 6, 6, 8, 4, 5, 6, 6, 4, 5, 9),
        array(1, 4, 4, 1, 7, 2, 0, 4, 6, 3, 3, 6, 7),
        array(0, 2, 2, 3, 8, 0, 0, 8, 6, 0, 2, 1, 7),
        array(0, 9, 4, 4, 8, 1, 2, 7, 3, 2, 6, 8, 0),
        array(0, 9, 8, 4, 2, 1, 4, 5, 2, 4, 9, 5, 1),
        array(0, 7, 2, 4, 7, 4, 3, 2, 4, 1, 5, 6, 9),
        array(1, 1, 8, 4, 8, 8, 8, 4, 3, 4, 1, 2, 5),
        array(0, 3, 2, 7, 5, 7, 0, 2, 7, 4, 5, 3, 5),
        array(0, 3, 0, 4, 6, 6, 6, 5, 7, 2, 1, 9, 5),
        array(1, 5, 6, 0, 1, 3, 2, 7, 3, 0, 9, 8, 6),
        array(0, 5, 5, 1, 7, 1, 0, 7, 9, 0, 3, 5, 7),
        array(0, 5, 4, 9, 7, 9, 7, 3, 8, 0, 1, 6, 3),
        array(1, 9, 2, 7, 3, 7, 9, 4, 3, 9, 8, 8, 2),
        array(0, 3, 1, 8, 9, 0, 9, 0, 4, 5, 5, 0, 9),
        array(1, 8, 6, 1, 7, 7, 2, 4, 7, 9, 2, 0, 8),
        array(0, 6, 1, 2, 7, 1, 4, 8, 4, 1, 1, 6, 0),
        array(0, 3, 9, 8, 5, 5, 3, 0, 8, 7, 9, 3, 5),
        array(0, 8, 4, 3, 7, 3, 1, 8, 2, 9, 1, 4, 7),
        array(0, 1, 5, 3, 4, 0, 5, 5, 5, 8, 0, 7, 2),
        array(0, 1, 7, 1, 8, 2, 1, 9, 8, 6, 1, 7, 0),
        array(0, 7, 1, 6, 9, 7, 2, 7, 2, 4, 4, 3, 6),
        array(0, 6, 2, 7, 2, 3, 4, 9, 3, 0, 1, 6, 3),
        array(0, 2, 9, 1, 9, 9, 9, 1, 9, 5, 4, 4, 4),
        array(0, 1, 8, 7, 0, 0, 5, 2, 1, 5, 7, 4, 6),
        array(1, 9, 0, 8, 7, 3, 3, 5, 5, 4, 9, 0, 1),
        array(1, 5, 8, 0, 1, 7, 0, 2, 3, 7, 3, 2, 9),
        array(1, 3, 2, 0, 5, 2, 7, 5, 0, 2, 6, 8, 1),
        array(0, 2, 7, 2, 3, 2, 2, 9, 6, 9, 4, 1, 6),
        array(1, 6, 4, 7, 9, 6, 5, 9, 5, 8, 2, 7, 1),
        array(1, 8, 1, 2, 6, 0, 2, 4, 0, 8, 0, 1, 6),
        array(1, 6, 2, 4, 1, 2, 4, 1, 7, 2, 7, 0, 6),
        array(0, 1, 8, 0, 5, 0, 4, 5, 5, 1, 0, 4, 7),
        array(0, 8, 7, 6, 4, 3, 5, 5, 7, 8, 4, 9, 0),
        array(0, 2, 7, 7, 0, 1, 6, 6, 1, 0, 9, 3, 5),
        array(0, 7, 6, 9, 8, 3, 8, 6, 2, 9, 3, 7, 0),
        array(1, 6, 6, 6, 0, 3, 0, 1, 0, 2, 5, 6, 1),
        array(0, 0, 4, 5, 1, 0, 9, 4, 4, 9, 4, 0, 9),
        array(0, 1, 6, 9, 4, 7, 5, 7, 8, 3, 5, 7, 0),
        array(1, 2, 7, 1, 6, 6, 1, 5, 2, 8, 6, 3, 8),
        array(1, 9, 1, 6, 7, 5, 1, 7, 4, 7, 6, 1, 8),
        array(1, 7, 6, 7, 0, 2, 9, 6, 9, 8, 6, 7, 8),
        array(0, 9, 8, 7, 3, 8, 1, 5, 2, 5, 2, 7, 5),
        array(0, 7, 3, 5, 7, 9, 7, 6, 6, 9, 1, 7, 5),
        array(1, 6, 7, 3, 4, 4, 7, 6, 2, 6, 6, 2, 3),
        array(0, 1, 4, 2, 2, 8, 5, 0, 9, 2, 7, 3, 1),
        array(0, 1, 4, 2, 1, 0, 0, 2, 1, 8, 9, 8, 3),
        array(1, 7, 0, 8, 7, 9, 9, 6, 4, 8, 6, 2, 2),
        array(1, 9, 3, 9, 9, 8, 7, 0, 8, 1, 1, 7, 3),
        array(1, 0, 4, 3, 5, 8, 0, 4, 6, 5, 4, 5, 8),
        array(0, 4, 8, 0, 5, 2, 3, 2, 3, 9, 4, 2, 3),
        array(0, 7, 9, 0, 9, 7, 2, 7, 7, 0, 4, 8, 5),
        array(1, 6, 5, 5, 3, 3, 2, 6, 1, 3, 4, 7, 1),
        array(0, 2, 9, 0, 0, 2, 9, 1, 8, 8, 2, 8, 4),
        array(1, 3, 2, 5, 0, 6, 2, 5, 3, 3, 6, 1, 1),
        array(1, 9, 2, 9, 3, 3, 8, 9, 9, 7, 2, 3, 7),
        array(1, 1, 8, 4, 0, 8, 2, 4, 8, 0, 0, 9, 2),
        array(1, 5, 2, 6, 0, 6, 1, 3, 0, 4, 7, 3, 8),
        array(1, 9, 3, 8, 1, 1, 7, 8, 6, 9, 0, 6, 8),
        array(1, 3, 2, 7, 7, 2, 2, 4, 2, 5, 8, 3, 0),
        array(1, 1, 1, 0, 7, 7, 3, 4, 7, 3, 6, 6, 8),
        array(0, 9, 4, 2, 8, 9, 4, 8, 4, 3, 2, 5, 3),
        array(0, 1, 0, 9, 2, 7, 2, 3, 9, 4, 5, 0, 8),
        array(1, 0, 4, 5, 8, 4, 0, 0, 5, 2, 2, 1, 2),
        array(0, 5, 0, 4, 5, 3, 2, 5, 4, 1, 3, 6, 9),
        array(1, 3, 0, 2, 7, 8, 1, 7, 7, 3, 5, 5, 9),
        array(1, 3, 7, 0, 0, 5, 8, 1, 7, 5, 6, 5, 2),
        array(1, 8, 1, 9, 9, 9, 4, 8, 6, 0, 7, 7, 3),
        array(0, 8, 3, 6, 2, 7, 4, 2, 1, 9, 1, 6, 8),
        array(0, 4, 4, 4, 2, 6, 0, 4, 0, 1, 5, 1, 7),
        array(1, 2, 7, 4, 7, 6, 6, 6, 3, 7, 7, 2, 9),
        array(0, 9, 8, 9, 3, 3, 3, 9, 0, 7, 4, 2, 3),
        array(0, 7, 6, 0, 9, 1, 7, 2, 4, 5, 8, 3, 3),
        array(1, 6, 1, 5, 5, 3, 1, 3, 2, 1, 0, 5, 6),
        array(0, 6, 2, 4, 1, 6, 6, 3, 4, 9, 2, 7, 0),
        array(1, 6, 3, 2, 3, 6, 1, 7, 7, 5, 6, 7, 1),
        array(1, 0, 4, 9, 2, 3, 3, 6, 2, 6, 9, 3, 2),
        array(0, 3, 7, 3, 9, 1, 3, 9, 5, 8, 5, 8, 9),
        array(1, 9, 0, 0, 3, 0, 9, 1, 2, 7, 8, 0, 3),
        array(1, 0, 1, 2, 7, 7, 0, 0, 1, 8, 4, 1, 1),
        array(0, 0, 5, 5, 9, 6, 9, 8, 1, 2, 1, 7, 2),
        array(0, 1, 8, 7, 9, 0, 3, 5, 6, 3, 2, 9, 4),
        array(1, 3, 1, 5, 7, 5, 0, 8, 5, 3, 2, 5, 0),
        array(1, 1, 7, 3, 5, 0, 7, 7, 9, 6, 8, 9, 0),
        array(0, 7, 7, 0, 9, 4, 2, 8, 8, 0, 2, 2, 0),
        array(1, 6, 5, 8, 3, 1, 0, 9, 0, 2, 7, 2, 9),
        array(1, 3, 5, 8, 4, 7, 6, 3, 1, 4, 3, 4, 7),
        array(0, 8, 8, 7, 8, 2, 7, 0, 3, 9, 6, 2, 9),
        array(1, 1, 6, 2, 6, 7, 5, 2, 5, 0, 8, 5, 5),
        array(0, 9, 6, 7, 3, 0, 2, 3, 9, 5, 3, 7, 4),
        array(1, 5, 2, 7, 3, 6, 0, 8, 3, 3, 9, 0, 3),
        array(0, 3, 6, 8, 9, 1, 7, 7, 3, 8, 7, 3, 8),
        array(0, 1, 2, 5, 4, 9, 8, 0, 3, 6, 4, 0, 4),
        array(1, 2, 4, 1, 6, 8, 1, 5, 8, 3, 6, 4, 3),
        array(1, 9, 3, 1, 0, 8, 4, 4, 0, 1, 6, 0, 8),
        array(0, 4, 5, 1, 0, 2, 1, 7, 1, 6, 1, 3, 3),
        array(0, 9, 5, 6, 8, 2, 2, 4, 0, 3, 9, 8, 1),
        array(1, 9, 3, 5, 4, 3, 1, 2, 2, 2, 0, 8, 7),
        array(0, 5, 6, 8, 1, 5, 7, 7, 8, 9, 4, 0, 6),
        array(1, 0, 4, 6, 4, 6, 7, 4, 6, 0, 3, 6, 2),
        array(1, 3, 3, 0, 2, 5, 3, 1, 9, 2, 3, 6, 8),
        array(0, 6, 9, 6, 3, 6, 9, 6, 2, 1, 5, 0, 7),
        array(1, 6, 5, 3, 0, 0, 0, 6, 2, 3, 8, 6, 0),
        array(1, 0, 7, 1, 2, 0, 3, 0, 3, 0, 8, 8, 0),
        array(0, 7, 1, 4, 3, 1, 8, 6, 7, 8, 1, 5, 4),
        array(0, 6, 3, 5, 5, 4, 8, 9, 4, 8, 3, 1, 7),
        array(0, 6, 4, 3, 1, 0, 7, 2, 9, 0, 5, 6, 7),
        array(0, 6, 3, 7, 7, 0, 6, 8, 6, 7, 4, 6, 0),
        array(0, 4, 2, 7, 2, 4, 1, 4, 6, 1, 8, 1, 7),
        array(1, 1, 7, 9, 0, 7, 0, 5, 1, 8, 6, 3, 5),
        array(1, 2, 0, 2, 7, 2, 7, 9, 1, 2, 7, 0, 3),
        array(0, 3, 3, 6, 2, 0, 9, 1, 1, 0, 3, 5, 8),
        array(1, 4, 0, 9, 9, 2, 5, 6, 5, 6, 8, 0, 5),
        array(0, 3, 5, 3, 3, 3, 4, 6, 7, 5, 7, 0, 5),
        array(0, 5, 8, 8, 5, 8, 5, 4, 7, 0, 5, 7, 3),
        array(0, 5, 0, 7, 6, 4, 2, 7, 8, 3, 6, 1, 4),
        array(0, 4, 7, 8, 6, 5, 3, 7, 7, 5, 7, 0, 7),
        array(1, 3, 6, 5, 3, 0, 8, 5, 4, 9, 7, 7, 1),
        array(1, 4, 8, 2, 8, 2, 8, 3, 4, 9, 4, 6, 7),
        array(1, 4, 1, 6, 9, 4, 5, 7, 7, 4, 6, 7, 7),
        array(0, 2, 8, 2, 3, 0, 7, 7, 1, 0, 1, 1, 0),
        array(1, 2, 2, 4, 5, 4, 7, 1, 0, 1, 8, 6, 7),
        array(0, 0, 7, 2, 4, 7, 2, 8, 2, 4, 4, 3, 9),
        array(1, 9, 1, 3, 2, 4, 1, 3, 3, 7, 5, 6, 1),
        array(1, 4, 7, 4, 6, 8, 6, 7, 4, 4, 1, 2, 8),
        array(0, 1, 6, 7, 3, 9, 0, 4, 7, 2, 9, 6, 7),
        array(0, 1, 3, 9, 1, 1, 1, 1, 6, 3, 0, 1, 1),
        array(1, 2, 7, 0, 2, 0, 7, 9, 7, 2, 1, 5, 2),
        array(0, 9, 1, 0, 4, 2, 8, 2, 2, 4, 2, 4, 0),
        array(1, 1, 7, 9, 7, 9, 3, 0, 5, 3, 4, 5, 2),
        array(0, 0, 7, 4, 3, 0, 8, 6, 7, 7, 7, 9, 6),
        array(0, 7, 0, 4, 0, 6, 7, 6, 3, 2, 0, 7, 1),
        array(0, 4, 8, 8, 0, 5, 3, 0, 7, 8, 4, 7, 9),
        array(0, 6, 3, 3, 3, 6, 6, 3, 7, 0, 4, 8, 3),
        array(0, 1, 2, 0, 6, 0, 3, 1, 0, 9, 9, 8, 0),
        array(0, 7, 0, 3, 8, 2, 5, 0, 7, 5, 0, 0, 4),
        array(1, 8, 8, 8, 2, 0, 6, 2, 5, 6, 2, 3, 2),
        array(1, 6, 2, 5, 8, 0, 1, 9, 7, 3, 7, 6, 0),
        array(0, 3, 6, 1, 9, 1, 6, 8, 2, 6, 5, 2, 5),
        array(0, 3, 9, 7, 8, 9, 4, 5, 4, 8, 5, 5, 1),
        array(1, 1, 5, 5, 2, 5, 3, 4, 5, 3, 5, 0, 9),
        array(1, 0, 9, 4, 9, 6, 1, 7, 0, 0, 6, 0, 1),
        array(0, 8, 4, 9, 9, 9, 3, 4, 1, 3, 5, 7, 7),
        array(0, 7, 8, 0, 0, 3, 5, 5, 9, 4, 1, 8, 1),
        array(1, 7, 3, 7, 6, 3, 2, 5, 6, 2, 7, 5, 0),
        array(0, 0, 2, 6, 0, 6, 6, 2, 7, 6, 1, 6, 2),
        array(1, 1, 6, 4, 7, 7, 9, 7, 0, 6, 2, 6, 6),
        array(0, 2, 1, 1, 4, 7, 6, 8, 8, 8, 9, 4, 3),
        array(0, 0, 8, 7, 5, 1, 9, 3, 1, 9, 8, 6, 0),
        array(0, 3, 4, 4, 0, 7, 1, 8, 7, 2, 7, 9, 9),
        array(1, 0, 4, 5, 3, 6, 0, 6, 6, 6, 4, 1, 5),
        array(0, 9, 7, 9, 9, 5, 9, 2, 3, 0, 4, 6, 2),
        array(1, 6, 5, 2, 7, 2, 1, 3, 5, 2, 5, 2, 1),
        array(1, 9, 9, 4, 8, 6, 3, 7, 8, 3, 3, 0, 6),
        array(0, 8, 2, 6, 6, 7, 8, 2, 1, 3, 2, 9, 2),
        array(0, 4, 8, 1, 9, 2, 4, 8, 4, 5, 4, 6, 4),
        array(1, 1, 7, 0, 7, 3, 5, 1, 4, 9, 5, 3, 1),
        array(1, 7, 8, 8, 3, 5, 3, 1, 5, 7, 6, 1, 9),
        array(1, 4, 5, 6, 5, 3, 2, 5, 3, 0, 3, 5, 5),
        array(0, 0, 2, 1, 3, 8, 9, 1, 0, 9, 7, 6, 7),
        array(0, 0, 7, 6, 1, 9, 1, 9, 5, 8, 9, 4, 0),
        array(1, 5, 4, 4, 6, 8, 7, 3, 9, 9, 0, 7, 4),
        array(1, 3, 0, 4, 8, 1, 2, 3, 9, 7, 1, 9, 5),
        array(1, 2, 6, 1, 4, 6, 9, 4, 7, 1, 1, 2, 6),
        array(0, 1, 6, 7, 5, 8, 3, 2, 7, 0, 4, 1, 1),
        array(1, 6, 2, 7, 8, 7, 6, 8, 7, 2, 0, 3, 3),
        array(0, 2, 1, 9, 2, 6, 7, 5, 9, 5, 2, 2, 2),
        array(0, 5, 2, 0, 4, 7, 7, 3, 8, 1, 5, 0, 9),
        array(1, 6, 5, 8, 6, 4, 0, 9, 6, 9, 0, 1, 8),
        array(1, 2, 0, 8, 7, 9, 2, 4, 4, 0, 9, 8, 9),
        array(1, 6, 5, 2, 0, 6, 1, 0, 4, 4, 1, 5, 8),
        array(1, 5, 4, 2, 5, 6, 2, 5, 6, 2, 2, 9, 5),
        array(1, 6, 9, 7, 2, 5, 1, 0, 6, 9, 1, 8, 1),
        array(0, 0, 3, 9, 9, 0, 6, 7, 9, 5, 7, 4, 6),
        array(1, 5, 8, 9, 9, 0, 6, 7, 9, 7, 9, 6, 1),
        array(1, 3, 6, 4, 6, 3, 6, 8, 4, 5, 2, 8, 3),
        array(0, 7, 4, 8, 4, 9, 7, 8, 0, 0, 1, 2, 2),
        array(0, 4, 2, 9, 1, 3, 8, 8, 3, 0, 0, 9, 8),
        array(1, 9, 0, 9, 2, 1, 2, 9, 3, 6, 5, 3, 2),
        array(1, 1, 0, 2, 0, 5, 9, 9, 5, 4, 7, 8, 9),
        array(1, 6, 0, 5, 9, 9, 1, 9, 0, 5, 4, 7, 1),
        array(1, 0, 4, 0, 0, 3, 2, 4, 1, 6, 4, 6, 5),
        array(1, 7, 3, 7, 3, 3, 7, 6, 1, 7, 7, 8, 6),
        array(0, 9, 1, 7, 3, 5, 1, 8, 9, 3, 8, 6, 2),
        array(1, 4, 9, 9, 3, 7, 5, 4, 4, 4, 4, 4, 0),
        array(0, 3, 7, 7, 4, 3, 6, 1, 1, 3, 5, 1, 6),
        array(0, 8, 5, 4, 3, 9, 3, 3, 1, 3, 4, 8, 1),
        array(1, 6, 1, 9, 4, 6, 4, 6, 4, 5, 2, 1, 5),
        array(1, 1, 1, 6, 8, 3, 9, 1, 1, 3, 0, 9, 9),
        array(0, 5, 1, 6, 8, 4, 8, 8, 2, 4, 4, 9, 2),
        array(0, 2, 3, 0, 1, 4, 2, 7, 1, 9, 9, 0, 6),
        array(0, 8, 4, 2, 5, 1, 4, 9, 5, 2, 0, 4, 3),
        array(0, 9, 1, 2, 5, 0, 6, 6, 5, 0, 3, 1, 8),
        array(1, 7, 8, 7, 1, 7, 4, 6, 3, 3, 3, 3, 9),
        array(0, 3, 7, 2, 9, 4, 1, 5, 4, 7, 2, 1, 0),
        array(1, 2, 8, 1, 1, 6, 4, 7, 8, 2, 0, 5, 2),
        array(1, 8, 3, 5, 4, 8, 0, 9, 7, 8, 0, 1, 8),
        array(1, 7, 9, 9, 0, 4, 5, 7, 2, 9, 0, 1, 9),
        array(0, 6, 6, 5, 6, 7, 0, 4, 0, 7, 8, 5, 1),
        array(0, 6, 0, 6, 3, 1, 1, 5, 0, 9, 2, 2, 3),
        array(1, 6, 3, 5, 6, 7, 1, 6, 6, 9, 7, 4, 9),
        array(0, 9, 5, 9, 8, 2, 4, 3, 3, 2, 3, 5, 6),
        array(0, 1, 6, 3, 8, 9, 9, 2, 8, 2, 5, 8, 6),
        array(1, 4, 7, 6, 6, 5, 7, 3, 3, 3, 4, 1, 1),
        array(1, 8, 2, 9, 0, 3, 8, 6, 8, 3, 3, 7, 3),
        array(0, 2, 8, 4, 8, 5, 4, 8, 9, 5, 0, 5, 7)
    );

    private static function getKeyNum($code)
    {
        $bhw = 0;
        $len = strlen($code);
        $start = substr($code, $len - 4);
        $bhw |= (ord($start[0]) & 3);
        $bhw |= (ord($start[1]) & 3) << 2;
        $bhw |= (ord($start[2]) & 3) << 4;
        $bhw |= (ord($start[3]) & 3) << 6;

        return $bhw;
    }
    
    private static function NIq($TMX)
    {
        $BuQ = array();
        for ($i = 0; $i < 4; $i++){
            $BuQ[$i] = rand(0, 10);
            $BuQ[$i] += 70;
            $BuQ[$i] = $BuQ[$i] >> 2;
            $BuQ[$i] = $BuQ[$i] << 2;
        }
        
        $TMX = intval($TMX);
        $BuQ[0] = $BuQ[0]| $TMX & 3;
        $BuQ[1] = $BuQ[1]|($TMX & 12) >> 2;
        $BuQ[2] = $BuQ[2]|($TMX & 48) >> 4;
        $BuQ[3] = $BuQ[3]|($TMX & 192) >> 6;
        
        return chr($BuQ[0]).chr($BuQ[1]).chr($BuQ[2]).chr($BuQ[3]); 
    }

    /**
     * 根据标点的经纬度坐标计算距离
     *
     * @param float $startLng 起点的经度
     * @param float $startLat 起点的纬度
     * @param float $endLng 终点的经度
     * @param float $endLat 终点的纬度
     * @return integer
     */
    public static function getDistance($startLng, $startLat, $endLng, $endLat)
    {
        if (!$startLng || !$startLat || !$endLng || !$endLat){
            return -1;
        }
        
        $startLatRad = deg2rad($startLat);
        $endLatRad = deg2rad($endLat);
        $a = $startLatRad - $endLatRad;
        $b = deg2rad($startLng) - deg2rad($endLng);
        $s = 2 * asin(sqrt(pow(sin($a / 2), 2) + cos($startLatRad) * cos($endLatRad) * pow(sin($b / 2), 2)));
        $s = $s * self::EARTH_RADIUS;
        $s = round($s * 10000) / 10000;

        return intval($s);
    }
    
    public static function isLocation($location, &$lng = 0, &$lat = 0)
    {
        if (preg_match('/^([1-9]\d+\.\d+),([1-9]\d+\.\d+)$/', $location, $match)){
            $lng = $match[1];
            $lat = $match[2];
            return true;
        }
        
        return false;
    }
}

/*
$coord = '108.947865';
$mapx1 = MapUtil::encodeCoord($coord);
$coord1 = MapUtil::decodeMapXY($mapx1);
echo "$coord => $mapx1 => $coord1 \n";
*/
